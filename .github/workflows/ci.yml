name: SQL Validation
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
jobs:
  validate_sql:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Validate SQL Files
        run: |
          pip install sqlfluff
          sqlfluff lint --dialect ansi files/*.sql
      - name: Handle Results
        run: |
          if [ $? -eq 0 ]; then
            echo "SQL validation succeeded!"
          else
            echo "SQL validation failed!"
            echo "Sending notification..."
            # Add your notification mechanism here
            # For example, send an email or create a GitHub issue
          fi
